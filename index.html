<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>NoorFast ‚Äì Mockup v7 (v1.1 features)</title>
  <style>
    :root{
      --deep: #0b3a2b;
      --deep-700: #082e22;
      --deep-600: #0e4333;
      --teal: #1bc9c2;
      --teal-700:#139c97;
      --bg: #f3f7f5;
      --card: #ffffff;
      --muted: #5d6c66;
      --muted-2: #7f8b86;
      --danger: #dc4c49;
      --shadow: 0 10px 28px rgba(3, 27, 20, .12);
      --radius-lg: 18px;
    }
    * { box-sizing: border-box; }
    html, body { background: var(--bg); margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color:#0a0e0d; }
    body.decor-off .screen::before{ display:none !important; }
    .phone { width: 414px; max-width: 100vw; height: 820px; background: var(--bg); border-radius: 34px; box-shadow: 0 20px 44px rgba(0,0,0,.16); border: 10px solid #0f0f0f; position: relative; overflow: hidden; margin: 22px auto; }
    .appbar { padding: 14px 16px; background: var(--deep); color: #fff; font-weight: 800; display:flex; align-items:center; justify-content:center; letter-spacing:.2px; }
    .screen { position:absolute; inset:52px 0 74px 0; overflow:auto; padding:16px; display:none; }
    .screen.active { display:block; }
    .screen::before{
      content:""; position:absolute; inset:0; pointer-events:none; opacity:.18; background-size:cover; background-repeat:no-repeat; background-position:center;
      filter: saturate(.95) contrast(.95);
    }
    #home.screen::before{
      background-image:
        radial-gradient(circle at 10% 10%, #0b3a2b 0 1.6px, transparent 2.8px),
        radial-gradient(circle at 30% 30%, #0b3a2b 0 1.6px, transparent 2.8px),
        radial-gradient(circle at 50% 50%, #0b3a2b 0 1.6px, transparent 2.8px),
        radial-gradient(circle at 70% 70%, #0b3a2b 0 1.6px, transparent 2.8px),
        radial-gradient(circle at 90% 30%, #0b3a2b 0 1.6px, transparent 2.8px);
      background-size: 120px 120px;
    }
    #quran.screen::before{
      background-image: url('data:image/svg+xml;utf8,\
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1600">\
          <g fill="%230b3a2b" opacity="0.26">\
            <path d="M50,200 C200,80 380,120 520,180 C680,250 760,350 760,450 C760,580 620,640 520,700 C400,770 340,860 360,960 C380,1060 480,1120 600,1160 C700,1194 780,1240 780,1320 C780,1420 680,1500 520,1520 C360,1540 200,1490 120,1420" stroke="none"/>\
            <path d="M120,100 C260,60 420,100 520,160 C640,232 700,320 700,400 C700,500 620,560 520,620 C420,680 360,760 380,840 C400,920 500,980 600,1020" stroke="none"/>\
          </g>\
        </svg>');
      background-size: cover;
    }
    #fasts.screen::before{
      background-image: radial-gradient(ellipse at 85% 12%, #0b3a2b 0 48px, transparent 50px), radial-gradient(circle at 78% 18%, #0b3a2b 0 3px, transparent 4px), radial-gradient(circle at 90% 22%, #0b3a2b 0 2px, transparent 3px);
    }
    #qibla.screen::before{
      background-image: url('data:image/svg+xml;utf8,\
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 140">\
          <rect width="800" height="140" fill="transparent"/>\
          <g fill="%230b3a2b" opacity="0.9">\
            <path d="M0,140 L0,100 40,100 40,78 60,78 60,60 80,60 80,140 Z"/>\
            <path d="M110,140 L110,70 125,70 125,25 135,25 135,70 150,70 150,140 Z"/>\
            <path d="M190,140 L190,75 210,75 210,55 230,55 230,75 250,75 250,140 Z"/>\
            <path d="M290,140 L290,65 305,65 305,20 315,20 315,65 330,65 330,140 Z"/>\
            <path d="M360,140 L360,90 380,90 380,70 400,70 400,90 420,90 420,140 Z"/>\
            <path d="M450,140 L450,75 470,75 470,55 490,55 490,75 510,75 510,140 Z"/>\
            <path d="M540,140 L540,85 560,85 560,65 580,65 580,85 600,85 600,140 Z"/>\
            <path d="M630,140 L630,70 650,70 650,50 670,50 670,70 690,70 690,140 Z"/>\
          </g>\
        </svg>');
      background-position: bottom center; background-size: 100% 140px;
    }
    #journal.screen::before{
      background-image: radial-gradient(240px 240px at 100% 0%, #0b3a2b 0, transparent 64%), radial-gradient(190px 190px at 90% 10%, #0b3a2b 0, transparent 59%);
    }
    #hydration.screen::before{
      background-image: radial-gradient(100px 28px at 50% 10%, #0b3a2b 0, transparent 75%), radial-gradient(100px 28px at 30% 18%, #0b3a2b 0, transparent 75%), radial-gradient(100px 28px at 70% 26%, #0b3a2b 0, transparent 75%);
    }
    #nafl.screen::before{
      background-image:
        radial-gradient(circle at 10% 10%, #0b3a2b 0 4px, transparent 5px),
        radial-gradient(circle at 18% 12%, #0b3a2b 0 2px, transparent 3px),
        radial-gradient(circle at 26% 14%, #0b3a2b 0 3px, transparent 4px);
      background-size: 160px 100px;
    }
    #prayer.screen::before{
      background-image: linear-gradient(180deg, rgba(11,58,43,.10), transparent 30%), radial-gradient(160px 160px at 95% 5%, #0b3a2b 0, transparent 60%);
    }

    .title { font-size:22px; font-weight:800; margin:0 0 8px; color: var(--deep-700); letter-spacing:.2px; }
    .subtitle { color: var(--muted); margin:-2px 0 12px 0; }
    .card { position:relative; background: var(--card); border-radius: var(--radius-lg); padding:16px; box-shadow: var(--shadow); margin-bottom:12px; }
    .card h3 { margin:0 0 8px; color: var(--deep-700); font-size:16px; }
    .row { display:flex; gap: 10px; align-items:stretch; }
    .col { flex:1; }
    .pill { display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background: #e9f8f7; color: #0e6d68; font-size:12px; cursor:pointer; border:1px solid #d7f1ef; }
    .pill.active { background:#ccf1ee; border-color:#b9ebe7; }
    .dot { width:8px; height:8px; border-radius:50%; background: var(--teal); display:inline-block; }
    .btn { display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:12px 14px; border-radius:14px; border:none; background: var(--deep); color:#fff; font-weight:700; cursor:pointer; box-shadow: 0 6px 14px rgba(11,58,43,.24); transition: transform .06s ease; }
    .btn:active { transform: translateY(1px) scale(.99); }
    .btn.secondary { background:#e8f7f5; color:var(--deep-600); box-shadow:none; }
    .btn.ghost { background:#fff; color:var(--deep); border:1px solid #dfe7e5; box-shadow:none; }
    .btn.full { width:100%; }
    .nav { position:absolute; bottom:0; left:0; right:0; height:74px; background:#ffffff; display:flex; gap:6px; align-items:center; justify-content:space-around; border-top:1px solid #e6efec; }
    .nav button { background:none; border:none; display:flex; flex-direction:column; align-items:center; gap:4px; color:#556964; font-size:11px; padding:10px; cursor:pointer; position:relative; }
    .nav button.active { color: var(--deep); }
    .nav button.active::after{ content:""; position:absolute; bottom:8px; width:28px; height:4px; background: var(--teal); border-radius:999px; }
    .icon { font-weight:900; font-size:18px; line-height:1; }
    .input { padding:12px 12px; border-radius:14px; border:1px solid #dfe7e5; background:#fff; width:100%; }
    .inline { display:flex; gap:8px; flex-wrap:wrap; }
    .label { font-size:12px; color:var(--muted); }
    .value { font-weight:800; }
    .list .item { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px; background:#fff; border-radius:16px; margin:10px 0; box-shadow: var(--shadow); }
    .item .meta { font-size:12px; color:var(--muted-2); }
    .badge { font-size:12px; color:#0f3d2e; background:#eaf9f8; border:1px solid #d7f1ef; padding:4px 8px; border-radius:999px; }
    .hint { font-size:12px; color:var(--muted); margin-top:8px; }
    .link { color: var(--deep); text-decoration: underline; cursor:pointer; }
    .greet { font-weight:900; color: var(--deep-700); font-size:18px; }
    .muted { color: var(--muted); }
    .tabs { display:flex; gap:8px; background:#eaf4f1; padding:6px; border-radius:12px; width: fit-content; }
    .tab { padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700; color:#2d4b42; }
    .tab.active { background:#fff; color: var(--deep); box-shadow: 0 2px 8px rgba(0,0,0,.06); }
    .ayah { padding:12px; border-radius:12px; background:#ffffff; box-shadow: var(--shadow); margin:10px 0; }
    .ar { font-family: 'Scheherazade', 'Amiri', serif; font-size:20px; line-height:1.8; direction: rtl; text-align:right; color:#0c3f30; }
    .en { margin-top:6px; color:#1d2b27; }
    .ayah .ref { font-size:12px; color:#577269; margin-top:8px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; color:#28554a; background:#f3faf9; padding:10px; border-radius:10px; border:1px dashed #dfe7e5; white-space: pre-wrap; }
    .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #dfe7e5; transition: .2s; border-radius: 999px; }
    .slider:before { position: absolute; content: ""; height: 22px; width: 22px; left: 3px; bottom: 3px; background-color: white; transition: .2s; border-radius: 50%; box-shadow: 0 1px 4px rgba(0,0,0,.2); }
    input:checked + .slider { background-color: var(--teal); }
    input:checked + .slider:before { transform: translateX(22px); }
    .ring { width:74px; height:74px; border-radius:50%; background: conic-gradient(var(--teal) var(--pct), #e6efec 0); display:grid; place-items:center; font-weight:800; color:#0f3d2e; }
  </style>
</head>
<body>
  <div class="phone">
    <div class="appbar">NoorFast</div>

    <!-- HOME -->
    <div class="screen active" id="home">
      <div class="greet">Assalamu alaikum, Aisha üëã</div>
      <div class="muted" style="margin-bottom:12px;">Today is Mar 22. Ramadan day 1.</div>

      <div class="card">
        <h3>Today‚Äôs fast</h3>
        <div class="row">
          <div class="col"><div class="label">Suhoor</div><div class="value">05:02</div></div>
          <div class="col"><div class="label">Iftar</div><div class="value">18:27</div></div>
          <div class="col"><div class="label">Duration</div><div class="value">13h 25m</div></div>
        </div>
        <div class="inline" style="margin-top:10px;">
          <button class="btn secondary" onclick="downloadICS('Suhoor','2025-03-22T05:02:00')">Add Suhoor to Calendar</button>
          <button class="btn secondary" onclick="downloadICS('Iftar','2025-03-22T18:27:00')">Add Iftar to Calendar</button>
        </div>
        <div class="hint">Travelling? <span class="link" onclick="switchTo('prayer')">Quickly change city</span></div>
      </div>

      <!-- Streaks + Reading goal -->
      <div class="row">
        <div class="card col">
          <h3>Streaks</h3>
          <div class="row">
            <div class="col"><div class="label">Fasting</div><div class="value">3 days üî•</div></div>
            <div class="col"><div class="label">Hydration</div><div class="value">2 days üíß</div></div>
            <div class="col"><div class="label">Qur‚Äôan</div><div class="value">4 days üìñ</div></div>
          </div>
        </div>
        <div class="card col">
          <h3>Reading goal</h3>
          <div class="row" style="align-items:center;">
            <div class="ring" id="goalRing" style="--pct:50%;">50%</div>
            <div class="col">
              <div class="value">2 / 4 pages</div>
              <div class="label">today‚Äôs goal</div>
              <div class="hint"><span class="link" onclick="switchTo('quran')">Continue reading</span></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick actions: fuller grid -->
      <div class="card">
        <h3>Quick actions</h3>
        <div class="row" style="margin-bottom:8px;">
          <button class="btn col" onclick="switchTo('journal')">üìù Journal</button>
          <button class="btn col" onclick="switchTo('hydration')">üíß Hydration</button>
          <button class="btn col" onclick="switchTo('quran')">üìñ Quran</button>
        </div>
        <div class="row">
          <button class="btn col" onclick="switchTo('qibla')">üß≠ Mosque Finder</button>
          <button class="btn col" onclick="openSuhoor()">üçΩÔ∏è Suhoor idea</button>
          <button class="btn col" onclick="openIftar()">üßâ Iftar idea</button>
        </div>
      </div>

      <!-- AI Meal suggestions card -->
      <div class="card">
        <h3>Need Suhoor or Iftar ideas?</h3>
        <div class="subtitle">Simple, realistic suggestions based on your day.</div>
        <div class="row" style="margin-bottom:6px;">
          <button class="btn col" onclick="openSuhoor()">Get Suhoor plan</button>
          <button class="btn col" onclick="openIftar()">Get Iftar plan</button>
        </div>
        <div class="hint">Latest: <em>‚ÄúOvernight oats with chia and dates‚Ä¶‚Äù</em> <span class="link" onclick="openSuhoor()">View</span></div>
      </div>

      <!-- Verse/Hadith of the day with excerpt -->
      <div class="card">
        <h3>Verse of the day <span class="badge" style="margin-left:6px; cursor:pointer;">‚≠ê Save</span></h3>
        <div class="mono">‚ÄúIndeed, in the remembrance of Allah do hearts find rest.‚Äù ‚Äî Q 13:28</div>
        <div class="hint">Short excerpt with reference ‚Ä¢ <span class="link">View details</span></div>
      </div>
    </div>

    <!-- FASTS LIST -->
    <div class="screen" id="fasts">
      <div class="title">Your fasts</div>
      <div class="subtitle">Track duration, energy and hunger</div>
      <div class="list">
        <div class="item"><div><div><strong>Mar 21</strong></div><div class="meta">13.4h ‚Ä¢ Energy 7 ‚Ä¢ Hunger 4</div></div><button class="btn secondary" onclick="switchTo('fastsForm')">Edit</button></div>
        <div class="item"><div><div><strong>Mar 20</strong></div><div class="meta">13.2h ‚Ä¢ Energy 6 ‚Ä¢ Hunger 5</div></div><button class="btn secondary" onclick="switchTo('fastsForm')">Edit</button></div>
      </div>
      <button class="btn full" style="margin-top:8px;" onclick="switchTo('fastsForm')">Log today‚Äôs fast</button>
    </div>

    <!-- FASTS FORM -->
    <div class="screen" id="fastsForm">
      <div class="title">Log today‚Äôs fast</div>
      <div class="card">
        <div class="row"><div class="col"><label class="label">Date</label><input class="input" placeholder="Today (Mar 22)"></div></div>
        <div class="row"><div class="col"><label class="label">Suhoor time</label><input class="input" placeholder="05:02"></div><div class="col"><label class="label">Iftar time</label><input class="input" placeholder="18:27"></div></div>
        <div class="row"><div class="col"><label class="label">Energy (0‚Äì10)</label><input class="input" placeholder="7"></div><div class="col"><label class="label">Hunger (0‚Äì10)</label><input class="input" placeholder="4"></div></div>
        <div class="field"><label class="label">Notes</label><textarea class="input" rows="3" placeholder="Optional notes..."></textarea></div>
        <div class="row"><button class="btn col">Save</button><button class="btn ghost col" onclick="switchTo('fasts')">Cancel</button></div>
      </div>
    </div>

    <!-- QURAN (Read + Progress) -->
    <div class="screen" id="quran">
      <div class="title">Qur‚Äôan</div>
      <div class="subtitle">Read Arabic & translation, with pagination.</div>
      <div class="inline" style="justify-content:space-between; align-items:center; margin-bottom:8px;">
        <div class="tabs">
          <div class="tab active" id="tabRead" onclick="toggleQuranTab('read')">Read</div>
          <div class="tab" id="tabProgress" onclick="toggleQuranTab('progress')">Progress</div>
        </div>
        <div class="inline">
          <button class="btn secondary" onclick="toggleLang('both')">Both</button>
          <button class="btn secondary" onclick="toggleLang('ar')">Arabic</button>
          <button class="btn secondary" onclick="toggleLang('en')">Trans.</button>
        </div>
      </div>
      <div class="card">
        <div class="row">
          <div class="col">
            <label class="label">Surah</label>
            <select class="input" id="surahPicker" onchange="resetQuran()">
              <option selected>2. Al-Baqarah</option>
              <option>18. Al-Kahf</option>
              <option>36. Ya-Sin</option>
            </select>
          </div>
          <div class="col">
            <label class="label">Continue reading</label>
            <button class="btn full" onclick="goToLast()">Jump to last position</button>
          </div>
        </div>
        <div class="row" style="margin-top:8px;">
          <div class="col"><label class="label">Font size</label><input class="input" type="range" min="16" max="28" value="20" oninput="setFontSize(this.value)"></div>
          <div class="col"><label class="label">Jump to ayah</label><div class="inline"><input class="input" id="jumpAyah" placeholder="e.g., 45"><button class="btn secondary" onclick="jumpToAyah()">Go</button></div></div>
        </div>
      </div>

      <!-- Read panel with pagination controls -->
      <div id="panelRead">
        <div id="ayahList"></div>
        <div class="row" style="margin-top:8px;">
          <button class="btn col" onclick="prevPage()">‚óÄ Previous</button>
          <div class="col" style="display:flex; align-items:center; justify-content:center;">
            <span class="badge" id="pageBadge">Page 1 / 6</span>
          </div>
          <button class="btn col" onclick="nextPage()">Next ‚ñ∂</button>
        </div>
        <div class="hint">Arabic ¬© Tanzil (Uthmani); English translation: Pickthall (public domain). Mock content for layout.</div>
      </div>

      <!-- Progress panel -->
      <div id="panelProgress" style="display:none;">
        <div class="card">
          <div class="row">
            <div class="col"><div class="label">Pages today</div><div class="value" id="pagesToday">2</div></div>
            <div class="col"><div class="label">Goal</div><div class="value">4</div></div>
          </div>
        </div>
        <div class="list">
          <div class="item"><div><strong>Mar 22 ‚Ä¢ Juz 2</strong><div class="meta">Pages: 6</div></div><div class="badge">Edit</div></div>
          <div class="item"><div><strong>Mar 21 ‚Ä¢ Juz 1</strong><div class="meta">Pages: 10</div></div><div class="badge">Edit</div></div>
        </div>
        <button class="btn full">Log reading</button>
      </div>
    </div>

    <!-- JOURNAL -->
    <div class="screen" id="journal">
      <div class="title">Your Ramadan journal</div>
      <div class="subtitle">Daily reflections and spiritual growth</div>
      <div class="list">
        <div class="item"><div><div><strong>Mar 22</strong></div><div class="meta">‚ÄúGrateful for a calm day...‚Äù</div></div><button class="btn secondary" onclick="openJournalDetail('Mar 22')">Open</button></div>
        <div class="item"><div><div><strong>Mar 21</strong></div><div class="meta">‚ÄúEnergy dipped in afternoon...‚Äù</div></div><button class="btn secondary" onclick="openJournalDetail('Mar 21')">Open</button></div>
      </div>
      <div class="card">
        <h3>Entry (Mar 22)</h3>
        <div class="row"><div class="col"><label class="label">Mood (0‚Äì10)</label><input class="input" placeholder="7"></div><div class="col"><label class="label">Energy (0‚Äì10)</label><input class="input" placeholder="6"></div></div>
        <div class="field"><label class="label">Gratitude</label><textarea class="input" rows="3" placeholder="Write a few lines..."></textarea></div>
        <div class="field"><label class="label">Duas</label><textarea class="input" rows="3" placeholder="Write your duas..."></textarea></div>
        <button class="btn full" onclick="openJournalDetail('Mar 22', true)">Generate reflection</button>
        <div class="hint">This is an AI-generated reflection and not religious advice.</div>
      </div>
    </div>

    <!-- HYDRATION -->
    <div class="screen" id="hydration">
      <div class="title">Hydration today</div>
      <div class="subtitle">Staying hydrated between Maghrib and Suhoor helps you feel better</div>
      <div class="card">
        <div class="row" style="align-items:center; margin-bottom:8px;"><div class="col"><div class="value">1200 ml</div><div class="label">out of 2000 ml</div></div><div class="badge">60%</div></div>
        <div style="height:11px; background:#e6efec; border-radius:999px; overflow:hidden;"><i style="display:block; height:100%; background: linear-gradient(90deg, var(--teal), #45dad3); width:60%;"></i></div>
        <div class="row" style="margin-top:12px;"><button class="btn col">+250 ml</button><button class="btn col">+500 ml</button></div>
        <div class="hint">These are just reminders. Listen to your body and your doctor.</div>
      </div>
    </div>

    <!-- QIBLA & MOSQUES -->
    <div class="screen" id="qibla">
      <div class="title">Qibla & nearby mosques</div>
      <div class="subtitle">Use your location to find direction and places</div>
      <div class="card">
        <h3>Qibla direction</h3>
        <div style="height:180px; border-radius:16px; background: conic-gradient(from 0deg, #e6efec, #fff); display:flex; align-items:center; justify-content:center; font-weight:800; color: var(--deep); margin-bottom:8px;">‚Üó  118¬∞ from North</div>
        <div class="hint">If the compass looks unstable, move your phone in a gentle ‚Äúfigure 8‚Äù to calibrate.</div>
      </div>
      <div class="card">
        <h3>Nearby mosques</h3>
        <div class="list">
          <div class="item"><div><div><strong>Masjid Al Hidayah</strong></div><div class="meta">1.2 km ‚Ä¢ Kensington</div></div><div class="inline"><button class="btn secondary">Open</button><button class="btn">Save</button></div></div>
          <div class="item"><div><div><strong>Islamic Centre</strong></div><div class="meta">2.4 km ‚Ä¢ Bayswater</div></div><div class="inline"><button class="btn secondary">Open</button><button class="btn">Save</button></div></div>
        </div>
      </div>
    </div>

    <!-- PRAYER TIMES (new in v1.1) -->
    <div class="screen" id="prayer">
      <div class="title">Prayer Times</div>
      <div class="subtitle">Based on your method & timezone</div>
      <div class="card">
        <div class="row">
          <div class="col">
            <label class="label">City (travel toggle)</label>
            <select class="input">
              <option>London</option>
              <option>Jeddah</option>
              <option>Karachi</option>
              <option>Jakarta</option>
              <option>Kuala Lumpur</option>
            </select>
          </div>
          <div class="col">
            <label class="label">View</label>
            <div class="inline">
              <button class="btn secondary">Day</button>
              <button class="btn secondary">Week</button>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <h3>Today ‚Ä¢ Sat</h3>
        <div class="list">
          <div class="item"><div><div>Fajr</div><div class="meta">05:02</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div><div>Dhuhr</div><div class="meta">12:28</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div><div>Asr</div><div class="meta">15:54</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div><div>Maghrib</div><div class="meta">18:27</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div><div>Isha</div><div class="meta">19:48</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
        </div>
        <div class="hint">In-app reminders only while the app is open.</div>
      </div>
    </div>

    <!-- NAFL FASTS -->
    <div class="screen" id="nafl">
      <div class="title">Nafl fasting days</div>
      <div class="subtitle">Upcoming recommended voluntary fasts (approx. calendar)</div>
      <div class="card"><div class="row" style="align-items:center;"><div class="col"><div class="label">Filters</div><div class="inline"><span class="pill"><i class="dot"></i> Mon/Thu</span><span class="pill"><i class="dot"></i> White Days</span><span class="pill"><i class="dot"></i> Ashura</span><span class="pill"><i class="dot"></i> Arafah</span></div></div><button class="btn secondary" onclick="openNaflInfo()">About accuracy</button></div></div>
      <div class="list">
        <div class="item"><div><div><strong>Mon, Apr 07</strong> ‚Äî Mondays & Thursdays</div><div class="meta">Regular Sunnah fast</div></div><button class="btn" onclick="openNaflDetail('Mondays & Thursdays','Fasting on Mondays and Thursdays is from the Sunnah.','Muslim 1162a')">Why?</button></div>
        <div class="item"><div><div><strong>Tue, Apr 15</strong> ‚Äî White Day (13th)</div><div class="meta">13th of Hijri month</div></div><button class="btn" onclick="openNaflDetail('White Days (13‚Äì15)','Fasting the middle three days of each Hijri month is recommended.','Abu Dawud 2449')">Why?</button></div>
        <div class="item"><div><div><strong>Sun, Jul 07</strong> ‚Äî Day of Arafah</div><div class="meta">9 Dhul-Hijjah (non-pilgrims)</div></div><button class="btn" onclick="openNaflDetail('Day of Arafah','Fasting on Arafah expiates sins of the previous and coming year for non-pilgrims.','Muslim 1162c')">Why?</button></div>
      </div>
      <div class="hint">Dates are approximate; please check local moonsighting and community guidance.</div>
    </div>

    <!-- MORE / SETTINGS -->
    <div class="screen" id="more">
      <div class="title">More & Settings</div>
      <div class="card">
        <h3>Features</h3>
        <div class="list">
          <div class="item" onclick="switchTo('prayer')"><div>Prayer Times</div><div>üï∞Ô∏è</div></div>
          <div class="item" onclick="switchTo('hydration')"><div>Hydration Tracker</div><div>üíß</div></div>
          <div class="item" onclick="switchTo('qibla')"><div>Qibla & Mosque Finder</div><div>üß≠</div></div>
          <div class="item" onclick="switchTo('journal')"><div>Journal</div><div>üìù</div></div>
          <div class="item" onclick="switchTo('quran')"><div>Quran</div><div>üìñ</div></div>
          <div class="item" onclick="switchTo('nafl')"><div>Nafl Fasts</div><div>üóìÔ∏è</div></div>
        </div>
      </div>
      <div class="card">
        <h3>Account & App</h3>
        <div class="list">
          <div class="item" onclick="switchTo('settings')"><div>Notifications & Content</div><div class="badge">Open</div></div>
          <div class="item" onclick="switchTo('about')"><div>About NoorFast</div><div class="badge">Open</div></div>
        </div>
      </div>
      <button class="btn full" style="background: var(--danger);">Sign out</button>
    </div>

    <!-- SETTINGS -->
    <div class="screen" id="settings">
      <div class="title">Appearance</div>
      <div class="card">
        <div class="row" style="align-items:center; justify-content:space-between;">
          <div><div>Decorative backgrounds</div><div class="hint">Subtle minarets/calligraphy/geometric designs per screen</div></div>
          <label class="switch"><input type="checkbox" id="decorToggle" checked onchange="toggleDecor(this.checked)"><span class="slider"></span></label>
        </div>
        <div class="row" style="margin-top:10px; gap:12px;">
          <div class="col"><label class="label">Background intensity</label><input class="input" value="Medium-High (v7)"></div>
        </div>
      </div>

      <div class="title">Notifications</div>
      <div class="card">
        <h3>Daily guidance</h3>
        <div class="row" style="align-items:center; justify-content:space-between;"><div><div>Qur‚Äôan/Hadith reflection</div><div class="hint">One gentle reminder per day while app is open</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
        <div class="row" style="margin-top:8px;"><div class="col"><label class="label">Remind me at</label><input class="input" type="time" value="18:00"></div></div>
      </div>

      <div class="card">
        <h3>Adhan reminders</h3>
        <div class="row" style="align-items:center; justify-content:space-between;"><div><div>Prayer time notifications</div><div class="hint">Works while the app is open (no background push)</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
        <div class="list">
          <div class="item"><div>Fajr</div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div>Dhuhr</div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div>Asr</div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div>Maghrib</div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
          <div class="item"><div>Isha</div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div>
        </div>
      </div>
    </div>

    <!-- ABOUT -->
    <div class="screen" id="about">
      <div class="title">About NoorFast</div>
      <div class="card"><div>NoorFast is a wellbeing and reflection tool designed to support your Ramadan experience.</div><div class="hint">It does not provide medical, nutritional, or religious rulings.</div></div>
      <div class="card"><h3>Content attribution</h3><div class="hint">Qur‚Äôan text ¬© Tanzil (used unmodified). Pickthall translation is public domain.</div><div class="hint">Hadith references are brief pointers; please consult scholars for rulings.</div></div>
    </div>

    <!-- NAV -->
    <div class="nav">
      <button id="nav-home" class="active" onclick="switchTo('home')"><div class="icon">üè†</div><div>Home</div></button>
      <button id="nav-fasts" onclick="switchTo('fasts')"><div class="icon">üóìÔ∏è</div><div>Fasts</div></button>
      <button id="nav-quran" onclick="switchTo('quran')"><div class="icon">üìñ</div><div>Quran</div></button>
      <button id="nav-more" onclick="switchTo('more')"><div class="icon">‚ãØ</div><div>More</div></button>
    </div>
  </div>

  <!-- JOURNAL MODAL -->
  <div id="journalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <button class="close" onclick="closeJournal()">√ó</button>
      <h3 id="journalTitle">Journal ‚Äî Mar 22</h3>
      <div class="row"><div class="col"><label class="label">Mood (0‚Äì10)</label><input class="input" placeholder="7"></div><div class="col"><label class="label">Energy (0‚Äì10)</label><input class="input" placeholder="6"></div></div>
      <div class="field"><label class="label">Gratitude</label><textarea class="input" rows="3">A peaceful morning and time to reflect.</textarea></div>
      <div class="field"><label class="label">Duas</label><textarea class="input" rows="3">For patience, good health, and sincerity.</textarea></div>
      <div class="row"><button class="btn col">Generate reflection</button><button class="btn ghost col" onclick="closeJournal()">Save entry</button></div>
      <div class="label" style="margin-top:10px;">AI reflection</div>
      <div class="mono">Today you showed care for your body and spirit. Keep your pace gentle and steady. When your energy dips, remember that rest can also be worship. Carry gratitude into the next hour with a smile and a sip of water after Maghrib. May your duas be answered with ease and clarity.</div>
      <div class="hint">This is an AI-generated reflection and not religious advice.</div>
    </div>
  </div>

  <!-- AI MEAL PLAN MODALS with pantry chips -->
  <div id="suhoorModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal">
      <button class="close" onclick="closeSuhoor()">√ó</button>
      <h3>Suhoor plan for today</h3>
      <div class="label">What do you have at home?</div>
      <div id="suhoorChips" class="inline" style="margin-bottom:8px;"></div>
      <div class="mono" id="suhoorText">
‚Ä¢ Overnight oats with chia, dates, and a spoon of peanut butter. 
‚Ä¢ 1‚Äì2 eggs for protein (boiled or omelette). 
‚Ä¢ A glass of milk or yogurt for sustained energy. 
‚Ä¢ Water + pinch of salt to prep hydration. 
‚Ä¢ Add a banana if you‚Äôll be active in the morning.
      </div>
      <div class="row" style="margin-top:8px;">
        <button class="btn col" onclick="regenerate('suhoor')">Regenerate</button>
        <button class="btn ghost col" onclick="closeSuhoor()">Close</button>
      </div>
      <div class="hint">AI suggestions are general and not medical or religious advice.</div>
    </div>
  </div>

  <div id="iftarModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal">
      <button class="close" onclick="closeIftar()">√ó</button>
      <h3>Iftar plan for today</h3>
      <div class="label">What do you have at home?</div>
      <div id="iftarChips" class="inline" style="margin-bottom:8px;"></div>
      <div class="mono" id="iftarText">
‚Ä¢ Start with water and 2‚Äì3 dates. 
‚Ä¢ A small bowl of fruit (e.g., orange or berries). 
‚Ä¢ Light soup (e.g., lentil) to warm up digestion. 
‚Ä¢ Protein: grilled chicken or chickpeas. 
‚Ä¢ Light carbs: a small portion of rice or wholegrain wrap.
      </div>
      <div class="row" style="margin-top:8px;">
        <button class="btn col" onclick="regenerate('iftar')">Regenerate</button>
        <button class="btn ghost col" onclick="closeIftar()">Close</button>
      </div>
      <div class="hint">AI suggestions are general and not medical or religious advice.</div>
    </div>
  </div>

  <!-- NAFL DETAIL MODALS -->
  <div id="naflDetail" class="modal-backdrop" aria-hidden="true">
    <div class="modal">
      <button class="close" onclick="closeNaflDetail()">√ó</button>
      <h3 id="naflTitle">White Days (13‚Äì15)</h3>
      <div class="mono" id="naflBody">Fasting the middle three days of each Hijri month is recommended.</div>
      <div class="hint" id="naflRef">Reference: Abu Dawud 2449</div>
      <div style="height:8px;"></div>
      <div class="row"><button class="btn col">Remind me today</button><button class="btn ghost col" onclick="closeNaflDetail()">Close</button></div>
      <div class="hint">Dates are approximate. Please consult your local community.</div>
    </div>
  </div>

  <div id="naflInfo" class="modal-backdrop" aria-hidden="true">
    <div class="modal">
      <button class="close" onclick="closeNaflInfo()">√ó</button>
      <h3>About date accuracy</h3>
      <div class="mono">Nafl fasting days based on Hijri dates are calculated using a civil Hijri calendar. Local moonsighting may differ by a day. Always follow your community.</div>
      <div class="row" style="margin-top:8px;"><button class="btn col" onclick="closeNaflInfo()">Okay</button></div>
    </div>
  </div>

  <script>
    const screens = ['home','fasts','fastsForm','quran','journal','hydration','qibla','prayer','nafl','more','settings','about'];
    const navIds = { home:'nav-home', fasts:'nav-fasts', quran:'nav-quran', more:'nav-more' };
    function switchTo(id){
      screens.forEach(s => document.getElementById(s).classList.remove('active'));
      document.getElementById(id).classList.add('active');
      Object.keys(navIds).forEach(k => document.getElementById(navIds[k]).classList.remove('active'));
      if(navIds[id]) document.getElementById(navIds[id]).classList.add('active');
    }
    function toggleDecor(on){ document.body.classList.toggle('decor-off', !on); }

    // ICS downloads
    function two(n){ return (n<10?'0':'')+n; }
    function downloadICS(title, iso){
      const start = new Date(iso);
      const end = new Date(start.getTime() + 30*60*1000);
      const dtstamp = start.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const dtstart = dtstamp;
      const dtend = end.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const uid = 'noorfast-'+Math.random().toString(36).slice(2)+'@noorfast.app';
      const ics = [
        'BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//NoorFast//EN',
        'BEGIN:VEVENT',
        'UID:'+uid,
        'DTSTAMP:'+dtstamp,
        'DTSTART:'+dtstart,
        'DTEND:'+dtend,
        'SUMMARY:'+title+' (NoorFast)',
        'DESCRIPTION:'+title+' reminder from NoorFast',
        'END:VEVENT','END:VCALENDAR'
      ].join('\r\n');
      const blob = new Blob([ics], {type:'text/calendar;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = title.toLowerCase() + '.ics'; a.click();
      setTimeout(()=>URL.revokeObjectURL(url), 1500);
    }

    // Journal modal
    function openJournalDetail(date){ document.getElementById('journalTitle').innerText = 'Journal ‚Äî ' + date; document.getElementById('journalBackdrop').classList.add('show'); document.getElementById('journalBackdrop').setAttribute('aria-hidden','false'); }
    function closeJournal(){ document.getElementById('journalBackdrop').classList.remove('show'); document.getElementById('journalBackdrop').setAttribute('aria-hidden','true'); }
    document.getElementById('journalBackdrop').addEventListener('click', (e)=>{ if(e.target.id==='journalBackdrop') closeJournal(); });

    // AI meal plan modals + pantry chips
    const pantry = ['eggs','oats','yogurt','milk','dates','bananas','rice','chicken','chickpeas','bread','olive oil','berries'];
    function chip(el){ el.classList.toggle('active'); }
    function buildChips(){
      const make = (id)=>{
        const wrap = document.getElementById(id);
        wrap.innerHTML = '';
        pantry.forEach(p=>{
          const s = document.createElement('span'); s.className='pill'; s.innerText=p; s.onclick=()=>chip(s); wrap.appendChild(s);
        });
      };
      make('suhoorChips'); make('iftarChips');
    }
    function picked(id){
      const wrap = document.getElementById(id);
      return Array.from(wrap.querySelectorAll('.pill.active')).map(x=>x.innerText);
    }
    function regenerate(kind){
      const list = picked(kind==='suhoor'?'suhoorChips':'iftarChips');
      const head = (list.length? ('Using: ' + list.slice(0,5).join(', ')+'.\\n') : '');
      if(kind==='suhoor'){
        document.getElementById('suhoorText').innerText = head + '‚Ä¢ Overnight oats with ' + (list.includes('oats')?'your oats, ': 'oats, ') + (list.includes('yogurt')?'yogurt, ':'milk, ') + 'and dates.\n‚Ä¢ Add eggs for protein if available.\n‚Ä¢ Include a fruit (banana/berries) and water.\n‚Ä¢ Keep it light and steady.';
      }else{
        document.getElementById('iftarText').innerText = head + '‚Ä¢ Water + 2‚Äì3 dates to open.\n‚Ä¢ Fruit or light soup.\n‚Ä¢ Protein: '+ (list.includes('chicken')?'grilled chicken':'chickpeas or eggs') +'.\n‚Ä¢ Light carbs: '+ (list.includes('rice')?'a small serving of rice':'wholegrain bread/wrap') +'.\n‚Ä¢ Pause, then eat slowly.';
      }
    }
    function openSuhoor(){ document.getElementById('suhoorModal').classList.add('show'); document.getElementById('suhoorModal').setAttribute('aria-hidden','false'); }
    function closeSuhoor(){ document.getElementById('suhoorModal').classList.remove('show'); document.getElementById('suhoorModal').setAttribute('aria-hidden','true'); }
    document.getElementById('suhoorModal').addEventListener('click', (e)=>{ if(e.target.id==='suhoorModal') closeSuhoor(); });

    function openIftar(){ document.getElementById('iftarModal').classList.add('show'); document.getElementById('iftarModal').setAttribute('aria-hidden','false'); }
    function closeIftar(){ document.getElementById('iftarModal').classList.remove('show'); document.getElementById('iftarModal').setAttribute('aria-hidden','true'); }
    document.getElementById('iftarModal').addEventListener('click', (e)=>{ if(e.target.id==='iftarModal') closeIftar(); });

    // Nafl modals
    function openNaflDetail(title, body, ref){ document.getElementById('naflTitle').innerText = title; document.getElementById('naflBody').innerText = body; document.getElementById('naflRef').innerText = 'Reference: ' + ref; document.getElementById('naflDetail').classList.add('show'); document.getElementById('naflDetail').setAttribute('aria-hidden', 'false'); }
    function closeNaflDetail(){ document.getElementById('naflDetail').classList.remove('show'); document.getElementById('naflDetail').setAttribute('aria-hidden', 'true'); }
    document.getElementById('naflDetail').addEventListener('click', (e)=>{ if(e.target.id==='naflDetail') closeNaflDetail(); });
    function openNaflInfo(){ document.getElementById('naflInfo').classList.add('show'); document.getElementById('naflInfo').setAttribute('aria-hidden', 'false'); }
    function closeNaflInfo(){ document.getElementById('naflInfo').classList.remove('show'); document.getElementById('naflInfo').setAttribute('aria-hidden', 'true'); }
    document.getElementById('naflInfo').addEventListener('click', (e)=>{ if(e.target.id==='naflInfo') closeNaflInfo(); });

    // Quran pagination + font size + jump
    const AYAH_PER_PAGE = 10;
    const totalAyah = 60;
    const sampleAyahs = Array.from({length:totalAyah}).map((_,i)=> ({ ar: 'ÿ¢Ÿäÿ© ' + (i+1) + ' ‚Äî ŸÜÿµ ÿπÿ±ÿ®Ÿä ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ÿÆÿ∑Ÿäÿ∑.', en: 'Ayah ' + (i+1) + ' ‚Äî sample English translation text for layout. (Pickthall)', ref: 'Al-Baqarah 2:' + (i+1) }));
    let currentPage = 1, lastPosition = 1, fontSize = 20, pagesReadToday = 2;
    function renderPage(){
      const start = (currentPage-1)*AYAH_PER_PAGE;
      const pageItems = sampleAyahs.slice(start, start + AYAH_PER_PAGE);
      const list = document.getElementById('ayahList'); list.innerHTML = '';
      pageItems.forEach(a => { const card = document.createElement('div'); card.className = 'ayah'; card.innerHTML = `<div class="ar" style="font-size:${fontSize}px">${a.ar}</div><div class="en">${a.en}</div><div class="ref">${a.ref}</div>`; list.appendChild(card); });
      const totalPages = Math.ceil(sampleAyahs.length/AYAH_PER_PAGE);
      document.getElementById('pageBadge').innerText = 'Page ' + currentPage + ' / ' + totalPages;
      lastPosition = start + 1;
      document.getElementById('panelRead').scrollTo({top:0, behavior:'smooth'});
    }
    function nextPage(){ const totalPages = Math.ceil(sampleAyahs.length/AYAH_PER_PAGE); if(currentPage < totalPages){ currentPage++; pagesReadToday++; updateGoal(); } renderPage(); }
    function prevPage(){ if(currentPage > 1){ currentPage--; } renderPage(); }
    function goToLast(){ currentPage = Math.ceil(lastPosition/AYAH_PER_PAGE) || 1; renderPage(); }
    function setFontSize(v){ fontSize = Number(v); renderPage(); }
    function jumpToAyah(){ const n = Number(document.getElementById('jumpAyah').value||1); currentPage = Math.max(1, Math.min(Math.ceil(n/AYAH_PER_PAGE), Math.ceil(sampleAyahs.length/AYAH_PER_PAGE))); renderPage(); }
    function updateGoal(){
      const goal = 4;
      const pct = Math.min(100, Math.round((pagesReadToday/goal)*100));
      const ring = document.getElementById('goalRing');
      ring.style.setProperty('--pct', pct+'%');
      ring.innerText = pct+'%';
      document.getElementById('pagesToday').innerText = Math.min(pagesReadToday, goal);
    }

    // init
    renderPage(); buildChips(); updateGoal();
  </script>
</body>
</html>